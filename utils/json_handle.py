import json


def get_json_string(ai_reply):
    string = (ai_reply
              .replace("```json", "")
              .replace("\n", "")
              .replace("  ", "")
              .replace(' ', '')
              .replace("'", '"')
              )
    # print(string)
    string = string.split("```")[0].strip()

    json_string = json.loads(string)
    return json_string


if __name__ == '__main__':
    get_json_string("""
    "{\"问题类型\":\"供水管网爆裂\",\"处置流程\":[{\"步骤\":\"启动应急响应并申请公共视频回溯权限\",\"开始时间\":\"15:30\",\"持续时间\":30},{\"步骤\":\"调度市测绘院勘测人员进行三维地质雷达探测\",\"开始时间\":\"19:30\",\"持续时间\":150},{\"步骤\":\"组织抢修队实施非开挖管道修复\",\"开始时间\":\"22:00\",\"持续时间\":300},{\"步骤\":\"水质检测与管网压力恢复测试\",\"开始时间\":\"03:00\",\"持续时间\":120}],\"处理方案\":{\"人员配置\":8,\"工具清单\":[\"地质雷达探测仪\",\"管道内衬修复设备\",\"移动式水质检测车\",\"液压动力站\",\"防爆通讯设备\"],\"注意事项\":[\"市测绘院资源响应需预留4小时准备期\",\"公共视频调用需完成三级审批流程\",\"夜间施工需配置声光报警装置\",\"压力测试需按GB/T50268标准执行\"]}}```**流程优化说明**：1.跨部门协同：-19:30启动的勘测环节严格遵循市测绘院4小时响应机制-公共视频调用在首环节即启动审批流程2.技术升级：-采用三维地质雷达替代传统勘测方法-使用非开挖修复技术减少路面破坏3.标准遵循：-压力测试执行国家管道工程验收规范-人员配置包含2名特种设备操作员4.夜间作业保障：-声光报警装置覆盖200米作业半径-防爆通讯设备确保地下管网通讯畅通（处置总时长19小时，含必需的跨部门协作等待期）"
    """)
